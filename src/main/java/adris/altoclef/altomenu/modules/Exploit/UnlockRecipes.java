package adris.altoclef.altomenu.modules.Exploit;

import adris.altoclef.altomenu.Mod;
import net.minecraft.client.MinecraftClient;
import net.minecraft.client.network.ClientPlayerEntity;
import net.minecraft.client.recipebook.ClientRecipeBook;
import net.minecraft.recipe.RecipeEntry;
import net.minecraft.recipe.RecipeManager;

//todo: Fix Crashing on Multiplayer Servers
public class UnlockRecipes extends Mod {

    public UnlockRecipes() {
        super("UnlockRecipes", "Unlocks all recipes", Mod.Category.EXPLOIT);
    }

    //onEnable
    @Override
    public void onEnable() {
        MinecraftClient client = net.minecraft.client.MinecraftClient.getInstance();
        ClientPlayerEntity player = mc.player;
        if (player != null) {
            ClientRecipeBook recipeBook = player.getRecipeBook();
            RecipeManager recipeManager = client.getServer().getRecipeManager();
            for (RecipeEntry<?> recipe : recipeManager.values()) {
                recipeBook.add(recipe);
                recipeBook.display(recipe);
            }
        }
        super.onEnable();
    }
}
